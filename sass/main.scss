@import "compass/css3";
@import "compass/css3/animation";

$white: #FFF;
$black: #000;
$red: #ff2d55;
$pink: #ffabbb;

* {
	margin: 0;
	padding: 0;
	@include box-sizing;
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
	tap-highlight-color: rgba(0, 0, 0, 0);
	@include user-select(none);
}

%fs {
	width: 100%;
	height: 100%;
}

.clearfix:after {
	content: '';
	display: table;
	width: 0;
	height: 0;
	clear: both;
}

html, body {
	background: $black;
	@extend %fs;
	overflow: hidden;
	font-family: Helvetica;
}

.apple-music {
	@extend %fs;
	text-align: center;
}

.status {
	width: 100%;
	height: 39px;
	background: url('../img/status.jpg') 50% 0 no-repeat;
}

.under {
	width: 100%;
	height: 17px;
	.inner {
		display: inline-block;
		width: 614px;
		height: 100%;
		background: #b1b1b1;
		border-radius: 14px 14px 0 0;
	}
}

.show {
	@extend %fs;
	background: $white;
	border-radius: 14px 14px 0 0;
	padding-top: 41px;
	.arr-down {
		width: 74px;
		height: 10px;
		margin: 0 auto;
		position: relative;
		z-index: 2;
		&:before, &:after {
			content: '';
			display: inline-block;
			width: 40px;
			height: 10px;
			border-radius: 10px;
			background: #d1d1d6;
			position: absolute;
			top: 0;
		}
		&:before {
			left: 0;
			@include transform-origin(100%, 50%);
			@include rotate(20deg);
		}
		&:after {
			right: 0;
			@include transform-origin(0, 50%);
			@include rotate(-20deg);
		}
	}
	$time: .4s;
	.album {
		width: 410px;
		height: 410px;
		margin: 67px auto 0;
		background: url('../img/album.jpg') 50% 50% no-repeat;
		background-size: 100% 100%;
		@include transform-origin(50%, 50%);
		will-change: transform;
		border-radius: 12px;
		@include scale(1);
		@include single-transition(all, $time, ease);
	}
	// album scale
	.album-big {
		@include scale(1.25);
		@include single-transition(all, $time+.3s, cubic-bezier(0.18, 0.89, 0.32, 1.28));
		@include single-box-shadow(0, 0, 80px, 16px, #b9b9b9);
	}
	
	.album-pause-up {
		@include translate3d(0, -30px, 0);
		@include single-transition(all, $time, ease);
	}
	
	.album-play-up {
		// @include scale(1.16);
		// @include translate3d(0, -45px, 0);
		@include transform(scale(1.07) translate3d(0, -30px, 0));
		@include single-transition(all, $time, ease);
	}
	
	.timeline {
		width: 512px;
		height: auto;
		margin: 91px auto 0;
		z-index: 2;
		.line {
			width: 100%;
			height: 6px;
			background: #dedede;
			border-radius: 6px;
			position: relative;
			.played {
				position: absolute;
				top: 0;
				left: 0;
				@extend %fs;
				background: #8e8e93;
				border-radius: 6px;
				width: 0;
			}
			.indicator {
				display: inline-block;
				width: 12px;
				height: 12px;
				background: #8e8e93;
				position: absolute;
				top: -3px;
				left: 0;
				border-radius: 50%;
				@include transform-origin(50%, 50%);
				@include single-transition(all, $time, cubic-bezier(0.18, 0.89, 0.32, 1.28));
			}
			.indicator-big {
					background-color: $red;
					@include scale(14/3);
			}
		}
		.time {
			width: 100%;
			height: 30px;
			position: relative;
			margin-top: 12px;
			span {
				position: absolute;
				top: 0;
				color: #8e8e93;
				letter-spacing: 2px;
				font-size: 26px;
			}
			.play {
				left: 2px;
				@include single-transition(all, $time+-.1s, ease);
			}
			.play-down {
				@include translate3d(0, 16px, 0);
				color: $red;
			}
			.play-color {
				color: $red;
			}
			.rest {
				right: 2px;
			}
		}
	}
	.info {
		margin: 30px auto 0;
		position: relative;
		&:after {
			content: '';
			display: block;
			position: absolute;
			height: 113px;
			top: -16px;
			left: 0;
			@extend %fs;
			@include box-shadow(#fff -64px 0 64px 0 inset, #fff 60px 0 64px 0 inset);
		}
		.name {
			font: {
				size: 35px;
				weight: 600;
			}
			letter-spacing: 1px;
		}
		.scroller {
			padding: 0 64px;
		}
		.desc {
			font: {
				size: 34px;
				weight: 400;
			}
			color: $red;
			letter-spacing: 1.2px;
			margin-top: 2px;
			white-space: nowrap;
			will-change: transform;
		}
	}
	.controls {
		width: 394px;
		height: 72px;
		margin: 40px auto 0;
		position: relative;
		span {
			display: inline-block;
			@include transform-origin(50%, 50%);
		}
		.up {
			@extend %fs;
			position: relative;
			z-index: 2;
			span {
				// @include transform-origin(33.33333%, 50%);
			}
		}
		.pp {
			position: relative;
			height: 72px;
			&:before, &:after {
				content: '';
				display: inline-block;
				position: absolute;
				top: 0;
				left: -23px;
				border-radius: 3px;
				border: {
					top: 36px solid transparent;
					right: 64px solid transparent;
					bottom: 36px solid transparent;
					left: 64px solid #000;
				}
			}
		}
		.pp-play {
			width: 56px;
			&:before, &:after {
				left: 0;
				border: 0;
				width: 24px;
				height: 72px;
				background: #000;
			}
			&:after {
				left: 32px;
			}
		}
		.prev, .next {
			position: absolute;
			top: 14px;
			width: 0;
			height: 44px;
			&:before, &:after {
				content: '';
				display: inline-block;
				position: absolute;
				top: 0;
				border-radius: 3px;
				border: {
					top: 22px solid transparent;
					right: 37px solid transparent;
					bottom: 22px solid transparent;
					left: 37px solid transparent;
				}
			}
		}
		.prev {
			left: 0;
			&:before, &:after {
				border-right-color: #000;
			}
			&:before {
				left: -37px;
			}
		}
		.next {
			right: 74px;
			&:before, &:after {
				border-left-color: #000;
			}
			&:after {
				left: 37px;
			}
		}
		.down {
			@extend %fs;
			position: absolute;
			top: 0;
			left: 0;
			z-index: 1;
			span {
				background: #e5e5e5;
				border-radius: 50%;
				width: 120px;
				height: 120px;
				opacity: 0;
				@include single-transition(all, .3s, ease);
			}
		}
		.prev-bg, .next-bg {
			position: absolute;
			top: -24px;
		}
		.prev-bg {
			left: -18px;
		}
		.pp-bg {
			position: relative;
			top: -24px;
		}
		.next-bg {
			right: -18px;
		}
	}
	.volumes {
		width: 421px;
		height: 6px;
		background: #dbdbdb;
		margin: 54px auto 0;
		border-radius: 6px;
		position: relative;
		.progress {
			@extend %fs;
			position: absolute;
			top: 0;
			left: 0;
			background: #8d8d93;
			border-radius: 6px;
			width: 176px;
		}
		.v-indicator {
			display: inline-block;
			width: 56px;
			height: 56px;
			background: #fff;
			border-radius: 50%;
			position: absolute;
			top: -25px;
			left: 143px;
			border: 1px solid #b4b4b4;
			@include box-shadow(#d7d7d7 0 10px 6px -3px, #d7d7d7 0 16px 48px 0);
		}
		.v-low, .v-high {
			display: inline-block;
			position: absolute;
			&:before, &:after {
				content: '';
				display: inline-block;
				position: absolute;
				left: 0;
				z-index: 2;
			}
			&:before {
				width: 5px;
				height: 8px;
				background: #8d8d93;
			}
			&:after {
				border : {
					top: 10px solid transparent;
					right: 12px solid #8d8d93;
					bottom: 10px solid transparent;
					left: 12px solid transparent;
				}
				border-radius: 3px;
				left: -12px;
			}
		}
		.v-low {
			width: 14px;
			height: 20px;
			left: -40px;
			top: -7px;
			&:before {
				top: 6px;
			}
		}
		.v-high {
			width: 33px;
			height: 28px;
			right: -59px;
			top: -11px;
			&:before {
				top: 11px;
			}
			&:after {
				top: 4px;
			}
			i {
				position: absolute;
				&:before, &:after {
					content: '';
					width: 0;
					height: 0;
					display: inline-block;
					position: absolute;
					border-radius: 50%;
				}
				@for $i from 1 through 3 {
					&.wave#{$i} {
						width: 58px-14px*$i;
						height: 58px-14px*$i;
						top: -(30px-14px*$i)/2;
						right: 7px*($i+-1);
						&:before {
							border: (58px-14px*$i)/2 solid transparent;
							border-right-color: #8d8d93;
							top: 0;
							left: 0;
						}
						&:after {
							border: (52px-14px*$i)/2 solid $white;
							top: 3px;
							right: 2px;
						}
					}
				}
			}
		}
	}
	.speaker {
		width: 44px;
		height: 45px;
		margin: 53px auto 0;
		position: relative;
		&:after {
			content: '';
			width: 0;
			height: 0;
			border: {
				top: 16px solid transparent;
				right: 18px solid transparent;
				bottom: 16px solid $red;
				left: 18px solid transparent;
			}
			position: absolute;
			bottom: 0;
			left: 4px;
		}
		span {
			position: absolute;
			&:before, &:after {
				content: '';
				width: 0;
				height: 0;
				display: inline-block;
				position: absolute;
				border-radius: 50%;
			}
			@for $i from 1 through 3 {
				&.wave#{$i} {
					width: 58px-14px*$i;
					height: 58px-14px*$i;
					top: 7px*($i+-1);
					left: 7px*($i+-1);
					&:before {
						border: (58px-14px*$i)/2 solid $pink;
						border-bottom-color: transparent;
						top: 0;
						left: 0;
					}
					&:after {
						border: (52px-14px*$i)/2 solid $white;
						top: 3px;
						left: 3px;
					}
				}
			}
		}
	}
	.options {
		width: 512px;
		height: 10px;
		margin: 0 auto;
		position: relative;
		top: -27px;
		text-align: right;
		.dots {
			display: inline-block;
			width: 10px;
			height: 10px;
			background: $red;
			border-radius: 50%;
			position: relative;
			@include single-transition(opacity, .3s, ease);
			&:before, &:after {
				content: '';
				display: inline-block;
				position: absolute;
				top: 0;
				left: -14px;
				width: 10px;
				height: 10px;
				background: $red;
				border-radius: 50%;
			}
			&:before {
				left: -28px;
			}
			&:active {
				opacity: .3;
			}
		}
	}
}

.bg-show-hide {
	@include animation('bg-show-hide' .6s ease);
}

@include keyframes('bg-show-hide') {
	0% {
		opacity: 1;
		// @include scale(1);
	}
	// 30% {
	// 	opacity: 1;
	// 	@include scale(.88);
	// }
	100% {
		opacity: 0;
		// @include scale(1);
	}
}

.down-up {
	@include animation('down-up' .5s ease);
}

@include keyframes('down-up') {
	0% {
		@include scale(.88);
	}
	100% {
		@include scale(1);
	}
}